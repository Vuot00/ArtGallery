<div class="upload-container">
  <h2>ğŸ¨ Carica Nuova Opera</h2>

  <form (ngSubmit)="onSubmit()" #operaForm="ngForm">

    <div class="form-group">
      <label>Titolo Opera</label>
      <input type="text" [(ngModel)]="opera.titolo" name="titolo" required>
    </div>

    <div class="form-group">
      <label>Descrizione</label>
      <textarea [(ngModel)]="opera.descrizione" name="descrizione" rows="4" required></textarea>
    </div>

    <div class="row">
      <div class="form-group half">
        <label>Prezzo (â‚¬)</label>
        <input type="number" [(ngModel)]="opera.prezzo" name="prezzo" required min="1">
      </div>
      <div class="form-group half">
        <label>Anno di creazione</label>
        <input type="number" [(ngModel)]="opera.anno" name="anno" required>
      </div>
    </div>

    <div class="form-group">
      <label>Immagini dell'Opera (puoi selezionarne piÃ¹ di una)</label>
      <input type="file" (change)="onFileSelected($event)" multiple accept="image/*">
    </div>

    <div class="preview-gallery" *ngIf="previewUrls.length > 0">
      <div class="preview-item" *ngFor="let url of previewUrls; let i = index">
        <img [src]="url" alt="Anteprima">
        <button type="button" (click)="removeFile(i)">âŒ</button>
      </div>
    </div>

    <button type="submit" [disabled]="!operaForm.form.valid || !selectedFiles" class="btn-submit">
      Pubblica Opera
    </button>

  </form>


  <div class="modal-overlay" *ngIf="showSuccessModal">

    <div class="modal-box">
      <div class="icon-check">âœ…</div>
      <h3>Opera Pubblicata!</h3>
      <p>La tua opera Ã¨ stata caricata correttamente ed Ã¨ ora visibile nella home.</p>

      <div class="modal-actions">
        <button class="btn-home" (click)="router.navigate(['/home'])">
          ğŸ  Torna alla Home
        </button>

        <button class="btn-new" (click)="resetForm()">
          â• Carica un'altra
        </button>
      </div>
    </div>

  </div>

</div>

